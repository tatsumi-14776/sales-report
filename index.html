<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¥æ¬¡å£²ä¸Šå ±å‘Šæ›¸</title>
    <link rel="stylesheet" href="styles.css">
    
    <!-- èªè¨¼ãƒã‚§ãƒƒã‚¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆæœ€åˆã«å®Ÿè¡Œï¼‰ -->
    <!-- èªè¨¼ä¿è­·ã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
    <script>
    (function() {
        // èªè¨¼ãƒã‚§ãƒƒã‚¯
        function checkAuth() {
            const session = sessionStorage.getItem('userSession') || localStorage.getItem('userSession');
            
            if (!session) {
                alert('ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™ã€‚ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã«ç§»å‹•ã—ã¾ã™ã€‚');
                window.location.href = 'login.html';
                return false;
            }
            
            try {
                const userSession = JSON.parse(session);
                if (!userSession || !userSession.isLoggedIn) {
                    alert('ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™ã€‚ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã«ç§»å‹•ã—ã¾ã™ã€‚');
                    window.location.href = 'login.html';
                    return false;
                }
                
                // ã‚»ãƒƒã‚·ãƒ§ãƒ³æœŸé™ãƒã‚§ãƒƒã‚¯ï¼ˆ24æ™‚é–“ï¼‰
                const currentTime = Date.now();
                const loginTime = userSession.loginTime || 0;
                const sessionDuration = 24 * 60 * 60 * 1000;
                
                if (currentTime - loginTime > sessionDuration) {
                    sessionStorage.removeItem('userSession');
                    localStorage.removeItem('userSession');
                    alert('ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒæœŸé™åˆ‡ã‚Œã§ã™ã€‚å†åº¦ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„ã€‚');
                    window.location.href = 'login.html';
                    return false;
                }
                
                return true;
                
            } catch (error) {
                sessionStorage.removeItem('userSession');
                localStorage.removeItem('userSession');
                alert('ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ã€‚ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã«ç§»å‹•ã—ã¾ã™ã€‚');
                window.location.href = 'login.html';
                return false;
            }
        }
        
        // èªè¨¼ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ
        if (!checkAuth()) {
            return;
        }
        
        // èªè¨¼æˆåŠŸæ™‚ã®å‡¦ç†
        document.addEventListener('DOMContentLoaded', function() {
            const userSession = JSON.parse(sessionStorage.getItem('userSession') || localStorage.getItem('userSession') || '{}');
            
            // ç®¡ç†è€…ãƒ•ãƒ©ã‚°ã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ä¿å­˜
            window.isAdminUser = userSession.role === 'admin';
            window.userSessionData = userSession;
            
            // åº—èˆ—åã‚’è¨­å®š
            const storeNameElement = document.getElementById('storeName');
            
            if (storeNameElement) {
                if (userSession.role === 'admin') {
                    // ç®¡ç†è€…ãƒ•ãƒ©ã‚°ã‚’è¦ç´ ã«è¨­å®š
                    storeNameElement.setAttribute('data-admin-mode', 'true');
                } else if (userSession.storeName) {
                    // ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å ´åˆï¼šèª­ã¿å–ã‚Šå°‚ç”¨
                    if (!storeNameElement.value || storeNameElement.value === 'åº—èˆ—æœªè¨­å®š') {
                        storeNameElement.value = userSession.storeName;
                    }
                    storeNameElement.readOnly = true;
                    storeNameElement.setAttribute('data-original-store-name', userSession.storeName);
                }
            }
            
            // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãƒœã‚¿ãƒ³è¿½åŠ 
            addLogoutButton();
        });
        
        // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½è¿½åŠ 
        function addLogoutButton() {
            const header = document.querySelector('.header');
            if (header) {
                const userSession = JSON.parse(sessionStorage.getItem('userSession') || localStorage.getItem('userSession') || '{}');
                
                const userInfoDiv = document.createElement('div');
                userInfoDiv.style.cssText = 'position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.9); padding: 8px 12px; border-radius: 6px; font-size: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); z-index: 1000;';
                
                userInfoDiv.innerHTML = `
                    <div style="margin-bottom: 4px; font-weight: bold; color: #333;">
                        ğŸ‘¤ ${userSession.username || 'ãƒ¦ãƒ¼ã‚¶ãƒ¼'} 
                        ${userSession.role === 'admin' ? '(ç®¡ç†è€…)' : ''}
                    </div>
                    <div style="margin-bottom: 4px; font-size: 11px; color: #666;">
                        ğŸª ${userSession.storeName || 'åº—èˆ—æœªè¨­å®š'}
                    </div>
                    <div style="display: flex; gap: 8px;">
                        ${userSession.role === 'admin' ? '<button onclick="goToAdmin()" style="padding: 4px 8px; font-size: 11px; border: 1px solid #007bff; background: #007bff; color: white; border-radius: 3px; cursor: pointer;">ç®¡ç†ç”»é¢</button>' : ''}
                        <button onclick="handleLogout()" style="padding: 4px 8px; font-size: 11px; border: 1px solid #dc3545; background: #dc3545; color: white; border-radius: 3px; cursor: pointer;">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
                    </div>
                `;
                
                header.appendChild(userInfoDiv);
            }
        }
        
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°ã¨ã—ã¦å®šç¾©
        window.handleLogout = function() {
            if (confirm('ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã™ã‹ï¼Ÿ\n\nå…¥åŠ›ä¸­ã®ãƒ‡ãƒ¼ã‚¿ã¯ä¿å­˜ã•ã‚Œã¾ã›ã‚“ã€‚')) {
                sessionStorage.removeItem('userSession');
                localStorage.removeItem('userSession');
                window.location.href = 'login.html';
            }
        };
        
        window.goToAdmin = function() {
            if (confirm('ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ç§»å‹•ã—ã¾ã™ã‹ï¼Ÿ')) {
                window.location.href = 'admin.html';
            }
        };
        
    })();
    </script>
</head>
<body>
    <!-- æ—¢å­˜ã®bodyã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ãã®ã¾ã¾ä½¿ç”¨ -->
    <div class="container">
        <!-- å³å´ï¼šé›†è¨ˆã‚µãƒãƒªãƒ¼ãƒ‘ãƒãƒ« -->
        <div class="summary-panel">
            <div class="summary-panel-title">ğŸ“Š æ—¥å ±é›†è¨ˆ</div>

            <!-- å£²ä¸Šæƒ…å ± -->
            <div class="summary-section">
                <div class="summary-subtitle">ğŸ“Š å£²ä¸Šç·é¡</div>
                <div class="summary-item">
                    <span class="summary-item-label">å£²ä¸Šç·é¡</span>
                    <span class="summary-item-value" id="summaryTotalSales">Â¥0</span>
                </div>
                <div class="summary-item indent">
                    <span class="summary-item-label">(å†…)10%åˆ†é›†è¨ˆ</span>
                    <span class="summary-item-value" id="summaryPercent10">Â¥0</span>
                </div>
                <div class="summary-item indent">
                    <span class="summary-item-label">(å†…)8%åˆ†é›†è¨ˆ</span>
                    <span class="summary-item-value" id="summaryPercent8">Â¥0</span>
                </div>
                
                <!-- æ‰‹å‹•èª¿æ•´ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
                <div class="manual-tax-summary-section">
                    <details class="manual-tax-details">
                        <summary class="manual-tax-summary">
                        <span class="manual-tax-title">æ‰‹å‹•èª¿æ•´</span>
                        <span class="manual-tax-chevron" aria-hidden="true">â–¾</span>
                        </summary>

                        <div class="manual-tax-inputs">
                        <div class="manual-tax-input-row">
                            <input
                            type="number"
                            id="manual10Percent"
                            class="manual-tax-summary-input"
                            placeholder="10%åˆ†å£²ä¸Šç·é¡"
                            onchange="handleManualTaxInput('manual10Percent')"
                            inputmode="numeric"
                            >
                        </div>

                        <div class="manual-tax-input-row">
                            <input
                            type="number"
                            id="manual8Percent"
                            class="manual-tax-summary-input"
                            placeholder="8%åˆ†å£²ä¸Šç·é¡"
                            onchange="handleManualTaxInput('manual8Percent')"
                            inputmode="numeric"
                            >
                        </div>

                        <div class="manual-tax-reset-wrapper">
                            <button
                            class="manual-tax-reset-button"
                            onclick="clearManualTaxInputs()"
                            type="button"
                            title="è‡ªå‹•è¨ˆç®—ã«æˆ»ã™"
                            >
                            è‡ªå‹•è¨ˆç®—ã«æˆ»ã™
                            </button>
                        </div>
                        </div>
                    </details>
                </div>


            </div>

            <!-- ç¾é‡‘ç®¡ç† -->
            <div class="summary-section">
                <div class="summary-subtitle">ğŸ’° ç¾é‡‘ç®¡ç†</div>
                <div class="summary-item">
                    <span class="summary-item-label">å‰æ—¥ç¾é‡‘æ®‹</span>
                    <span class="summary-item-value" id="summaryPreviousCash">Â¥0</span>
                </div>
                <div class="summary-item">
                    <span class="summary-item-label">ç¾é‡‘å£²ä¸Š</span>
                    <span class="summary-item-value" id="summaryCashSales">Â¥0</span>
                </div>
                <div class="summary-item">
                    <span class="summary-item-label">é›‘åå…¥</span>
                    <span class="summary-item-value" id="summaryMiscIncome">Â¥0</span>
                </div>
                <div class="summary-item">
                    <span class="summary-item-label negative">å‡ºé‡‘é¡</span>
                    <span class="summary-item-value negative" id="summaryExpenses">Â¥0</span>
                </div>
                <div class="summary-item">
                    <span class="summary-item-label negative">å…¥é‡‘é¡</span>
                    <span class="summary-item-value negative" id="summaryDeposit">Â¥0</span>
                </div>
                <div class="summary-item total-line">
                    <span class="summary-item-label">æœ¬æ—¥ç¾é‡‘æ®‹</span>
                    <span class="summary-item-value" id="todayCashBalance">Â¥0</span>
                </div>
            </div>

            <!-- ç¾é‡‘éä¸è¶³ -->
            <div class="summary-section">
                <div class="summary-subtitle">âš–ï¸ ç¾é‡‘éä¸è¶³</div>
                <div class="cash-difference-display">
                    <div class="cash-diff-item">
                        <span class="cash-diff-label">ç†è«–æ®‹é«˜</span>
                        <span class="cash-diff-value" id="theoreticalBalance">Â¥0</span>
                    </div>
                    <div class="cash-diff-item">
                        <span class="cash-diff-label">å®Ÿéš›æ®‹é«˜</span>
                        <span class="cash-diff-value" id="actualBalance">Â¥0</span>
                    </div>
                    <div class="cash-diff-item difference-result">
                        <span class="cash-diff-label">éä¸è¶³é¡</span>
                        <span class="cash-diff-value" id="cashDifference">Â¥0</span>
                    </div>
                </div>
            </div>

            <!-- ç®¡ç†è€…ç¢ºå®šæ“ä½œï¼ˆè¿½åŠ ï¼‰ -->
            <div class="summary-section admin-confirm-section" id="adminConfirmSection" style="display: none;">
                <div class="summary-subtitle">ğŸ‘‘ ç®¡ç†è€…æ“ä½œ</div>
                <div class="admin-confirm-actions">
                    <button class="confirm-button-summary" id="confirmButton" onclick="handleConfirm()" style="display: none;">
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        ç¢ºå®š
                    </button>
                    
                    <button class="unconfirm-button-summary" id="unconfirmButton" onclick="handleUnconfirm()" style="display: none;">
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                        ç¢ºå®šè§£é™¤
                    </button>
                    
                    <div class="confirm-status" id="confirmStatus" style="display: none;">
                        <span class="status-icon">âœ…</span>
                        <span class="status-text">ç¢ºå®šæ¸ˆã¿</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- å·¦å´ï¼šå…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  -->
        <div class="main-content">
            <div class="form-card">
                <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
                <div class="header">
                    <div class="title-section">
                        <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        <h1 class="title">æ—¥æ¬¡å£²ä¸Šå ±å‘Šæ›¸</h1>
                    </div>

                    <!-- åŸºæœ¬æƒ…å ± -->
                    <div class="basic-info">
                        <div class="info-group">
                            <label class="info-label">æ—¥ä»˜:</label>
                            <input type="date" id="date" class="info-input wide" required>
                            <button class="today-load-button" onclick="handleLoadData()">ãƒ‡ãƒ¼ã‚¿èª­è¾¼</button>
                        </div>
                        <div class="info-group">
                            <label class="info-label">åº—èˆ—:</label>
                            <input type="text" id="storeName" class="info-input wide" placeholder="åº—èˆ—å" required readonly>
                        </div>
                        <div class="info-group">
                            <label class="info-label">æ‹…å½“:</label>
                            <input type="text" id="inputBy" class="info-input" placeholder="æ‹…å½“è€…" required>
                        </div>
                    </div>
                    
                    <!-- ãƒ‡ãƒ¼ã‚¿æ“ä½œãƒœã‚¿ãƒ³ -->
                    <div class="data-actions">
                        <button class="load-button" onclick="loadTodayData()">
                            <svg width="14" height="14" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"/>
                            </svg>
                            å½“æ—¥ãƒ‡ãƒ¼ã‚¿ã‚’èª­è¾¼
                        </button>
                    </div>
                </div>

                <!-- å°åˆ·ç”¨é›†è¨ˆã‚µãƒãƒªãƒ¼ï¼ˆç”»é¢ã§ã¯éè¡¨ç¤ºï¼‰ -->
                <div class="print-summary" style="display: none;">
                    <div class="print-summary-title">æ—¥å ±é›†è¨ˆ</div>
                    <div class="print-summary-grid">
                        <div class="print-summary-item">
                            <div class="print-summary-label">å£²ä¸Šç·é¡</div>
                            <div class="print-summary-value" id="printTotalSales">Â¥0</div>
                        </div>
                        <div class="print-summary-item">
                            <div class="print-summary-label">ç¾é‡‘å£²ä¸Š</div>
                            <div class="print-summary-value" id="printCashSales">Â¥0</div>
                        </div>
                        <div class="print-summary-item">
                            <div class="print-summary-label">æœ¬æ—¥ç¾é‡‘æ®‹</div>
                            <div class="print-summary-value" id="printTodayBalance">Â¥0</div>
                        </div>
                        <div class="print-summary-item">
                            <div class="print-summary-label">ç¾é‡‘éä¸è¶³</div>
                            <div class="print-summary-value" id="printCashDifference">Â¥0</div>
                        </div>
                    </div>
                </div>

                <div class="content">
                    <!-- å£²ä¸Šæƒ…å ±ã¨ãƒã‚¤ãƒ³ãƒˆãƒ»ã‚¯ãƒ¼ãƒãƒ³ã‚’å·¦å³é…ç½® -->
                    <div class="sales-point-grid">
                        <!-- å£²ä¸Šæƒ…å ±ï¼ˆå·¦å´ï¼‰ -->
                        <div class="section section-green">
                            <h2 class="section-title">å£²ä¸Šæƒ…å ±</h2>
                            <!-- æ”¯æ‰•ã„æ–¹æ³•ã¯JavaScriptã§å‹•çš„ç”Ÿæˆ -->
                            <!-- å£²ä¸Šåˆè¨ˆ -->
                            <div class="section-total total-green">
                                <div class="total-row">
                                    <span class="total-label">å£²ä¸Šåˆè¨ˆ:</span>
                                    <span class="total-value" id="salesTotal">Â¥0</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ãƒã‚¤ãƒ³ãƒˆãƒ»ã‚¯ãƒ¼ãƒãƒ³æ”¯æ‰•ï¼ˆå³å´ï¼‰ -->
                        <div class="section section-point">
                            <h2 class="section-title">ãƒã‚¤ãƒ³ãƒˆãƒ»ã‚¯ãƒ¼ãƒãƒ³æ”¯æ‰•</h2>
                            <!-- ãƒã‚¤ãƒ³ãƒˆãƒ»ã‚¯ãƒ¼ãƒãƒ³æ”¯æ‰•é …ç›®ã¯JavaScriptã§å‹•çš„ç”Ÿæˆ -->
                            <!-- æ”¯æ‰•åˆè¨ˆ -->
                            <div class="section-total total-point">
                                <div class="total-row">
                                    <span class="total-label">ãƒã‚¤ãƒ³ãƒˆãƒ»ã‚¯ãƒ¼ãƒãƒ³åˆè¨ˆ:</span>
                                    <span class="total-value" id="pointTotal">Â¥0</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- å…¥é‡‘ãƒ»é›‘åå…¥ -->
                    <div class="section section-blue">
                        <h2 class="section-title">å…¥é‡‘ãƒ»é›‘åå…¥</h2>
                        <div class="grid-2">
                            <div class="discount-item">
                                <label class="discount-label">å…¥é‡‘</label>
                                <div class="discount-input-wrapper">
                                    <span class="currency-symbol">Â¥</span>
                                    <input type="number" id="nyukin" class="discount-input" placeholder="0">
                                </div>
                            </div>
                            <div class="discount-item">
                                <label class="discount-label">æ‹¾å¾—é‡‘</label>
                                <div class="discount-input-wrapper">
                                    <span class="currency-symbol">Â¥</span>
                                    <input type="number" id="foundMoney" class="discount-input" placeholder="0">
                                </div>
                            </div>
                            <div class="discount-item">
                                <label class="discount-label">é›‘åå…¥</label>
                                <div class="discount-input-wrapper">
                                    <span class="currency-symbol">Â¥</span>
                                    <input type="number" id="miscIncome" class="discount-input" placeholder="0">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ãƒ¬ã‚¸é‡‘ã‹ã‚‰ã®çµŒè²»æ”¯å‡º -->
                    <div class="section section-red">
                        <div class="expense-header">
                            <h2 class="section-title">ãƒ¬ã‚¸é‡‘ã‹ã‚‰ã®çµŒè²»æ”¯å‡º</h2>
                            <button class="add-button" onclick="addExpenseRecord()">
                                <svg width="12" height="12" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 4v16m8-8H4"/>
                                </svg>
                                è¿½åŠ 
                            </button>
                        </div>

                        <div id="expenseRecords">
                            <div class="expense-record">
                                <input type="text" class="expense-input" placeholder="è³¼å…¥å…ˆ" data-field="vendor" data-id="1">
                                <select class="expense-select" data-field="account" data-id="1">
                                    <option value="">å‹˜å®šç§‘ç›®</option>
                                    <option value="æ¶ˆè€—å“è²»">æ¶ˆè€—å“è²»</option>
                                    <option value="é›‘è²»">é›‘è²»</option>
                                    <option value="é€šä¿¡è²»">é€šä¿¡è²»</option>
                                    <option value="æ°´é“å…‰ç†±è²»">æ°´é“å…‰ç†±è²»</option>
                                    <option value="ä¿®ç¹•è²»">ä¿®ç¹•è²»</option>
                                    <option value="äº¤é€šè²»">äº¤é€šè²»</option>
                                    <option value="ãã®ä»–">ãã®ä»–</option>
                                </select>
                                <input type="text" class="expense-input" placeholder="å“ç‰©ãƒ»å†…å®¹" data-field="item" data-id="1">
                                <div class="expense-amount-wrapper">
                                    <span class="expense-amount-symbol">Â¥</span>
                                    <input type="number" class="expense-amount-input" placeholder="0" data-field="amount" data-id="1">
                                </div>
                                <input type="text" class="expense-input" placeholder="é©æ ¼è«‹æ±‚æ›¸ç™»éŒ²ç•ªå·" data-field="invoiceNumber" data-id="1">
                                <button class="delete-button" onclick="removeExpenseRecord(1)" disabled>
                                    <svg width="12" height="12" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                                    </svg>
                                </button>
                            </div>
                        </div>

                        <!-- çµŒè²»åˆè¨ˆ -->
                        <div class="section-total total-red">
                            <div class="total-row">
                                <span class="total-label">çµŒè²»åˆè¨ˆ:</span>
                                <span class="total-value" id="expenseTotal">Â¥0</span>
                            </div>
                        </div>
                    </div>

                    <!-- ãƒ¬ã‚¸é‡‘ãƒ»é‡‘åº«ç®¡ç† -->
                    <div class="section section-purple">
                        <h2 class="section-title">ãƒ¬ã‚¸é‡‘ãƒ»é‡‘åº«ç®¡ç†ï¼ˆé‡‘ç¨®åˆ¥ï¼‰</h2>

                        <!-- å‰æ—¥ç¾é‡‘æ®‹å…¥åŠ› -->
                        <div class="previous-cash-section">
                            <div class="info-group">
                                <label class="info-label">å‰æ—¥ç¾é‡‘æ®‹:</label>
                                <div class="discount-input-wrapper">
                                    <span class="currency-symbol">Â¥</span>
                                    <input type="number" id="previousCashBalance" class="discount-input" placeholder="0" value="0" onchange="updateAllCalculations()">
                                </div>
                            </div>
                        </div>

                        <div class="cash-table">
                            <div class="cash-header">
                                <div>é‡‘ç¨®</div>
                                <div style="text-align: center;">ãƒ¬ã‚¸ï¼ˆæšï¼‰</div>
                                <div style="text-align: center;">é‡‘åº«ï¼ˆæšï¼‰</div>
                                <div style="text-align: center;">åˆè¨ˆæšæ•°</div>
                                <div style="text-align: right;">é‡‘é¡</div>
                            </div>

                            <div id="denominationRows">
                                <!-- é‡‘ç¨®ãƒ‡ãƒ¼ã‚¿ã¯JavaScriptã§ç”Ÿæˆ -->
                            </div>

                            <!-- åˆè¨ˆè¡¨ç¤º -->
                            <div class="cash-summary">
                                <div class="summary-grid">
                                    <div class="summary-card summary-blue">
                                        <div class="summary-label">ãƒ¬ã‚¸åˆè¨ˆ</div>
                                        <div class="summary-value" id="registerTotal">Â¥0</div>
                                    </div>
                                    <div class="summary-card summary-green">
                                        <div class="summary-label">é‡‘åº«åˆè¨ˆ</div>
                                        <div class="summary-value" id="safeTotal">Â¥0</div>
                                    </div>
                                    <div class="summary-card summary-purple">
                                        <div class="summary-label">ç·åˆè¨ˆ</div>
                                        <div class="summary-value" id="totalCash">Â¥0</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- å‚™è€ƒãƒ»å ±å‘Šäº‹é … -->
                    <div class="section section-blue full-width">
                        <h2 class="section-title">å‚™è€ƒãƒ»å ±å‘Šäº‹é …</h2>
                        
                        <div class="remarks-section">
                            <textarea 
                                id="remarks" 
                                class="remarks-textarea" 
                                placeholder="ãƒ»ç‰¹è¨˜ã™ã¹ãäº‹é …ã‚„ãƒˆãƒ©ãƒ–ãƒ«ç­‰ãŒã‚ã‚Œã°è¨˜å…¥ã—ã¦ãã ã•ã„&#10;ãƒ»ä»Šæ—¥ã®å£²ä¸Šå‚¾å‘ã‚„æ°—ã¥ã„ãŸç‚¹ãªã©&#10;ãƒ»ãŠå®¢æ§˜ã‹ã‚‰ã®ã”æ„è¦‹ã‚„ã‚¯ãƒ¬ãƒ¼ãƒ &#10;ãƒ»è¨­å‚™ã®ä¸å…·åˆã‚„ä¿®ç†ä¾é ¼ãªã©&#10;ãƒ»ãã®ä»–å ±å‘Šäº‹é …"
                                rows="8"
                                maxlength="1000"></textarea>
                            <div class="character-count">
                                <span id="charCount">0</span> / 1000æ–‡å­—
                            </div>
                        </div>
                    </div>

                    <!-- æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ« -->
                    <div class="section section-blue">
                        <h2 class="section-title">æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«</h2>
                        
                        <div class="file-upload-section">
                            <div class="file-upload-header">
                                <span class="file-count-info">æœ€å¤§5å€‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ·»ä»˜ã§ãã¾ã™</span>
                            </div>
                            
                            <div id="fileInputs">
                                <!-- ãƒ•ã‚¡ã‚¤ãƒ«å…¥åŠ›æ¬„ãŒJavaScriptã§å‹•çš„ç”Ÿæˆ -->
                            </div>
                            
                            <div class="file-upload-notes">
                                <p>å¯¾å¿œãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼: PDF, Excel, Word, ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆJPG, PNG, GIFï¼‰</p>
                                <p>ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºä¸Šé™: 1ãƒ•ã‚¡ã‚¤ãƒ«å½“ãŸã‚Š10MB</p>
                                <p>ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºåˆè¨ˆ: 20MBã¾ã§</p>
                            </div>
                        </div>
                    </div>

                    <!-- é€ä¿¡ãƒœã‚¿ãƒ³ -->
                    <div class="actions">
                        <button class="print-button" onclick="handlePrint()">å°åˆ·</button>
                        <button class="submit-button" onclick="handleSubmit()">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H9V7h6v2z"/>
                            </svg>
                            çµŒç†èª²ã«é€ä¿¡
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- åŸºæœ¬ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‹ã‚‰é †ç•ªã«èª­ã¿è¾¼ã¿ -->
    <script src="js/calculations.js" onerror="console.error('calculations.js ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ')"></script>
    <script src="js/ui.js" onerror="console.error('ui.js ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ')"></script>
    <script src="js/fileManager.js" onerror="console.error('fileManager.js ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ')"></script>
    <script src="js/dataManager.js" onerror="console.error('dataManager.js ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ')"></script>
    
    <!-- å‹•çš„è¨­å®šã‚·ã‚¹ãƒ†ãƒ ï¼ˆä»–ã®é–¢æ•°å®šç¾©å¾Œã«èª­ã¿è¾¼ã¿ï¼‰ -->
    <script src="js/dynamic-config.js" onerror="console.error('dynamic-config.js ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ')"></script>
    
    <!-- ãƒ¡ã‚¤ãƒ³åˆæœŸåŒ–å‡¦ç†ï¼ˆæœ€å¾Œã«èª­ã¿è¾¼ã¿ï¼‰ -->
    <script src="js/main.js" onerror="console.error('main.js ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ')"></script>
    
    <!-- ã‚¹ã‚¯ãƒªãƒ—ãƒˆèª­ã¿è¾¼ã¿å®Œäº†ã®ç¢ºèª -->
    <script>
        console.log('ğŸ”§ å…¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆèª­ã¿è¾¼ã¿å®Œäº†');
        console.log('é–¢æ•°å®šç¾©ç¢ºèª:', {
            generatePaymentMethods: typeof generatePaymentMethods,
            generateDiscountSection: typeof generateDiscountSection,
            updateAllCalculations: typeof updateAllCalculations,
            paymentMethodConfig: typeof paymentMethodConfig
        });
    </script>
</body>
</html>